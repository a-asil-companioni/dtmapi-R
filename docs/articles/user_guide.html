<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dtmapi">
<title>User Guide • dtmapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User Guide">
<meta property="og:description" content="dtmapi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dtmapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/user_guide.html">User Guide</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>User Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R/blob/HEAD/vignettes/user_guide.Rmd" class="external-link"><code>vignettes/user_guide.Rmd</code></a></small>
      <div class="d-none name"><code>user_guide.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>dtmapi</code> package provides functions to interact with
the Displacement Tracking Matrix (DTM) API. This vignette demonstrates
how to use the package’s functions to fetch data from the API. The
functions covered include:</p>
<ul>
<li><p><code><a href="../reference/get_all_countries.html">get_all_countries()</a></code></p></li>
<li><p><code><a href="../reference/get_all_operations.html">get_all_operations()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin1_data.html">get_idp_admin1_data()</a></code></p></li>
<li><p><code><a href="../reference/get_idp_admin2_data.html">get_idp_admin2_data()</a></code></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="install-package">Install Package<a class="anchor" aria-label="anchor" href="#install-package"></a>
</h2>
<p>The <code>dtmapi</code> package is available on CRAN and can be
installed using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"dtmapi"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-package">Load Package<a class="anchor" aria-label="anchor" href="#load-package"></a>
</h2>
<p>After installation, load the package using library():</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Displacement-Tracking-Matrix/dtmapi-R" class="external-link">dtmapi</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setting-the-subscription-key">Setting the Subscription Key<a class="anchor" aria-label="anchor" href="#setting-the-subscription-key"></a>
</h2>
<p>After creating a subscription key on <a href="https://dtm-apim-portal.iom.int" class="external-link uri">https://dtm-apim-portal.iom.int</a>, that key needs to be
given to R. There are two main ways to do this.</p>
<ol style="list-style-type: decimal">
<li>By calling <code><a href="../reference/set_subscription_key.html">set_subscription_key()</a></code> and then typing in
the key.</li>
</ol>
<p>The user will be prompted to input the key into a pop-up field.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_subscription_key.html">set_subscription_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>By setting up the environment variable directly.</li>
</ol>
<p>If one would like to avoid re-inputting the subscription key for each
R session, an alternative approach is to create the environment variable
<code>DTM_SUBSCRIPTION_KEY</code>, with the subscription key as its
value. Ideally, this should be (a) done in a <em>.Renviron</em> file,
and (b) through the use of <em>R projects</em> or other means of
organising files (e.g. if one is using VS Code:
<em>workspaces</em>).</p>
<p>One quick way to get started is by calling the following line of
code, if one is using an R project or equivalent:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_environ</a></span><span class="op">(</span><span class="st">"project"</span><span class="op">)</span></span></code></pre></div>
<p>Or, if one is not using an R project or equivalent:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_environ</a></span><span class="op">(</span><span class="st">"user"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-countries">Get All Countries<a class="anchor" aria-label="anchor" href="#get-all-countries"></a>
</h2>
<p>The <code><a href="../reference/get_all_countries.html">get_all_countries()</a></code> function retrieves a list of all
countries from the DTM API.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch all countries</span></span>
<span><span class="va">countries_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_countries.html">get_all_countries</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">countries_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-all-operations">Get All Operations<a class="anchor" aria-label="anchor" href="#get-all-operations"></a>
</h2>
<p>The <code><a href="../reference/get_all_operations.html">get_all_operations()</a></code> function retrieves a list of
all operations from the DTM API.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch all operations</span></span>
<span><span class="va">operations_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_all_operations.html">get_all_operations</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">operations_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-0">Get IDP Data at Admin Level 0<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-0"></a>
</h2>
<p>The <code><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data()</a></code> function retrieves Internally
Displaced Persons (IDP) data aggregated at the country level.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 0</span></span>
<span><span class="va">idp_admin0_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin0_data.html">get_idp_admin0_data</a></span><span class="op">(</span>CountryName<span class="op">=</span><span class="st">'Ethiopia'</span>, FromRoundNumber<span class="op">=</span><span class="fl">1</span>, ToRoundNumber<span class="op">=</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">idp_admin0_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-1">Get IDP Data at Admin Level 1<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-1"></a>
</h2>
<p>The get_idp_admin1_data() function retrieves IDP data aggregated at
Admin Level 1.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 1</span></span>
<span><span class="va">idp_admin1_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin1_data.html">get_idp_admin1_data</a></span><span class="op">(</span>CountryName<span class="op">=</span><span class="st">'Sudan'</span>, Admin1Name<span class="op">=</span><span class="st">"Blue Nile"</span>, FromReportingDate<span class="op">=</span><span class="st">'2020-01-01'</span>, ToReportingDate<span class="op">=</span><span class="st">'2024-08-15'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">idp_admin1_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-idp-data-at-admin-level-2">Get IDP Data at Admin Level 2<a class="anchor" aria-label="anchor" href="#get-idp-data-at-admin-level-2"></a>
</h2>
<p>The get_idp_admin2_data() function retrieves IDP data aggregated at
Admin Level 2</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fetch IDP data at Admin Level 2</span></span>
<span><span class="va">idp_admin2_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_idp_admin2_data.html">get_idp_admin2_data</a></span><span class="op">(</span>Operation<span class="op">=</span><span class="st">"Displacement due to conflict"</span>, CountryName<span class="op">=</span><span class="st">'Lebanon'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display the first few rows of the data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">idp_admin2_df</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="function-arguments">Function Arguments<a class="anchor" aria-label="anchor" href="#function-arguments"></a>
</h2>
<p>Here are the descriptions for the arguments used in the functions of
the <code>dtmapi</code> package to get IDP data. At least one of the
following parameters must be provided: Operation, CountryName, or
Admin0Pcode.</p>
<div class="section level3">
<h3 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h3>
<ul>
<li><p><strong>Operation</strong>: Optional; Name of the DTM operation
for which the data was collected.</p></li>
<li><p><strong>CountryName</strong>: Optional; Name of the country where
the data was collected.</p></li>
<li><p><strong>Admin0Pcode</strong>: Optional; Country code (ISO 3166-1
alpha-3).</p></li>
<li><p><strong>Admin1Name</strong>: Optional; Name of level 1
administrative boundaries.</p></li>
<li><p><strong>Admin1Pcode</strong>: Optional; Place code of level 1
administrative boundaries.</p></li>
<li><p><strong>Admin2Name</strong>: Optional; Name of level 2
administrative boundaries.</p></li>
<li><p><strong>Admin2Pcode</strong>: Optional; Place code of level 2
administrative boundaries.</p></li>
<li><p><strong>FromReportingDate</strong>: Optional; Start date for the
reporting period (format: ‘YYYY-MM-DD’).</p></li>
<li><p><strong>ToReportingDate</strong>: Optional; End date for the
reporting period (format: ‘YYYY-MM-DD’).</p></li>
<li><p><strong>FromRoundNumber</strong>: Optional; Starting round number
for the data collection range.</p></li>
<li><p><strong>ToRoundNumber</strong>: Optional; Ending round number for
the data collection range.</p></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Luong Bang Tran, Assad Asil Companioni.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
